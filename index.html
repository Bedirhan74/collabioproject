<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collabio - Proje Yönetimi</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="project-member.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <nav class="sidebar">
        <div class="logo-container">
            <img src="images/collabio-logo.png" alt="Collabio Logo" class="logo">
        </div>

        <div class="nav-section">
            <a href="sizin_icin.html" class="nav-item"><i class="fas fa-user"></i> Sizin için</a>
            <a href="#" class="nav-item"><i class="fas fa-clock"></i> En son</a>
            <a href="#" class="nav-item"><i class="fas fa-star"></i> Favori</a>
        </div>
        
        <div class="nav-section">
            <div class="section-header">
                <span>Projeler</span>
                <button class="add-btn"><i class="fas fa-plus"></i></button>
            </div>
            <div class="project-item active">
                <div class="project-item-content">
                    <button class="project-member-btn left-member-btn" data-project-id="collabio" title="Katılımcı Ekle"><i class="fas fa-user-plus"></i></button>
                    <img src="images/collabio-logo.png" alt="Collabio" class="project-icon">
                    <span>Collabio</span>
                </div>
            </div>
        </div>

    </nav>


    <main class="main-content">
        <header>
            <div class="header-top">
                <h1>Collabio Project Management</h1>
                
            </div>
            <nav class="project-nav">
                <div class="nav-left">
                    <a href="ozet.html" class="nav-link"><i class="fas fa-chart-pie"></i> Özet</a>
                    <a href="index.html" class="nav-link active"><i class="fas fa-th-large"></i> Pano</a>
                    <a href="list.html" class="nav-link"><i class="fas fa-list"></i> Liste</a>
                    <a href="calendar.html" class="nav-link"><i class="fas fa-calendar"></i> Takvim</a>
                    <a href="zamancizelgesi.html" class="nav-link"><i class="fas fa-chart-bar"></i> Zaman çizelgesi</a>
                    <a href="onaylar.html" class="nav-link"><i class="fas fa-check-circle"></i> Onaylar</a>
                    <a href="formlar.html" class="nav-link"><i class="fas fa-file-alt"></i> Formlar</a>
                    
                    <a href="ekler.html" class="nav-link"><i class="fas fa-paperclip"></i> Ekler</a>
                </div>
            </nav>
        </header>

        <div class="board-header">
            <div class="board-header-left">
                <h2>Görev Panosu</h2>
            </div>
            <button onclick="showAddTaskModal('yapilacaklar')" class="add-task-btn">
                </i> Görev Ekle
            </button>
        </div>
        <div class="board-container">
            <div class="column" id="yapilacaklar">
                <div class="column-header">
                    <div class="column-title">
                        <h3>YAPILACAKLAR</h3>
                        <span class="task-count">0</span>
                    </div>
                    <button class="column-add-btn" id="add-column-btn-yapilacaklar" title="Yeni sütun ekle">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="task-list">
                    <div class="task-card">
                        <div class="task-card-header">
                            <span class="task-code">COL-12</span>
                            <span class="task-priority high"></span>
                        </div>
                        <div class="task-content">
                            <h4>İş akışları</h4>
                            <div class="task-meta">
                                <span class="task-date">20 Mar 2025</span>
                            </div>
                        </div>
                        <div class="task-footer">
                            <img src="https://ui-avatars.com/api/?name=BT&background=18a0fb&color=fff" class="avatar" title="Bahri Talha Baş">
                        </div>
                    </div>
                    <div class="task-card">
                        <div class="task-card-header">
                            <span class="task-code">COL-9</span>
                            <span class="task-priority medium"></span>
                        </div>
                        <div class="task-content">
                            <h4>Otomasyon projesinin temel yapısını oluşturmak.</h4>
                            <div class="task-meta">
                                <span class="task-date">20 Mar 2025</span>
                            </div>
                        </div>
                        <div class="task-footer">
                            <img src="https://ui-avatars.com/api/?name=MD&background=9c27b0&color=fff" class="avatar" title="Melike Danışmaz">
                        </div>
                    </div>
                    <div class="task-card">
                        <div class="task-card-header">
                            <span class="task-code">COL-13</span>
                            <span class="task-priority low"></span>
                        </div>
                        <div class="task-content">
                            <h4>deneme</h4>
                            <div class="task-meta">
                                <span class="task-date">20 Mar 2025</span>
                            </div>
                        </div>
                        <div class="task-footer">
                            <img src="https://ui-avatars.com/api/?name=MD&background=9c27b0&color=fff" class="avatar" title="Melike Danışmaz">
                        </div>
                    </div>
                </div>
            </div>

            <div class="column" id="devamEdiyor">
                <div class="column-header">
                    <div class="column-title">
                        <h3>DEVAM EDİYOR</h3>
                        <span class="task-count">0</span>
                    </div>
                    <button class="column-add-btn" id="add-column-btn-devamEdiyor" title="Yeni sütun ekle">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="task-list">
                    <div class="task-card">
                        <div class="task-card-header">
                            <span class="task-code">COL-3</span>
                            <span class="task-priority high"></span>
                        </div>
                        <div class="task-content">
                            <h4>Api geliştirme</h4>
                            <div class="task-meta">
                                <span class="task-date">20 Mar 2025</span>
                            </div>
                        </div>
                        <div class="task-footer">
                            <img src="https://ui-avatars.com/api/?name=ÖF&background=18a0fb&color=fff" class="avatar" title="Ömer Faruk Bingöl">
                        </div>
                    </div>
                    <div class="task-card">
                        <div class="task-card-header">
                            <span class="task-code">COL-5</span>
                            <span class="task-priority medium"></span>
                        </div>
                        <div class="task-content">
                            <h4>Login Page kodlama</h4>
                            <div class="task-meta">
                                <span class="task-date">20 Mar 2025</span>
                            </div>
                        </div>
                        <div class="task-footer">
                            <img src="https://ui-avatars.com/api/?name=CY&background=9c27b0&color=fff" class="avatar" title="Ceren Yolur">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="column" id="beklemede">
                <div class="column-header">
                    <div class="column-title">
                        <h3>BEKLEMEDE</h3>
                        <span class="task-count">0</span>
                    </div>
                    <button class="column-add-btn" id="add-column-btn-beklemede" title="Yeni sütun ekle">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="task-list">
                    <!-- Boş sütun -->
                </div>
            </div>
            
            <div class="column" id="tamam">
                <div class="column-header">
                    <div class="column-title">
                        <h3>TAMAM</h3>
                        <span class="task-count">0</span>
                    </div>
                    <button class="column-add-btn" id="add-column-btn-tamam" title="Yeni sütun ekle">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="task-list">
                    <div class="task-card">
                        <div class="task-card-header">
                            <span class="task-code">COL-4</span>
                            <span class="task-priority high"></span>
                        </div>
                        <div class="task-content">
                            <h4>UX/UI Tasarımı</h4>
                            <div class="task-meta">
                                <span class="task-date">20 Mar 2025</span>
                            </div>
                        </div>
                        <div class="task-footer">
                            <img src="https://ui-avatars.com/api/?name=BO&background=ffd600&color=333" class="avatar" title="Bedirhan Özmen">
                        </div>
                    </div>
                    <div class="task-card">
                        <div class="task-card-header">
                            <span class="task-code">COL-10</span>
                            <span class="task-priority medium"></span>
                        </div>
                        <div class="task-content">
                            <h4>Frontend Geliştirme</h4>
                            <div class="task-meta">
                                <span class="task-date">20 Mar 2025</span>
                            </div>
                        </div>
                        <div class="task-footer">
                            <img src="https://ui-avatars.com/api/?name=AE&background=ff7043&color=fff" class="avatar" title="Arif Emink">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Görev Ekleme Modal -->
    <div id="taskForm" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Yeni Görev Ekle</h2>
                <span class="close">&times;</span>
            </div>
            <form id="newTaskForm">
                <div class="form-group">
                    <label for="taskTitle">Başlık</label>
                    <input type="text" id="taskTitle" required placeholder="Görev başlığı">
                </div>
                <div class="form-group">
                    <label for="taskCode">Kod</label>
                    <input type="text" id="taskCode" required placeholder="Örn: COL-13">
                </div>
                <div class="form-row">
                    <div class="form-group half">
                        <label for="taskAssignee">Atanan Kişi</label>
                        <select id="taskAssignee" required>
                            <option value="">Seçiniz...</option>
                            <option value="Bedirhan Özmen">Bedirhan Özmen</option>
                            <option value="Ömer Faruk Bingöl">Ömer Faruk Bingöl</option>
                            <option value="Ceren Yolur">Ceren Yolur</option>
                            <option value="Emre Kandazoğlu">Emre Kandazoğlu</option>
                            <option value="Büşra Özer">Büşra Özer</option>
                            <option value="Arif Emin Köklü">Arif Emin Köklü</option>
                            <option value="Bahrı Talha Baş">Bahrı Talha Baş</option>
                            <option value="Enes Taşpınar">Enes Taşpınar</option>
                        </select>
                    </div>
                    <div class="form-group half">
                        <label for="taskCategory">Kategori</label>
                        <select id="taskCategory" required>
                            <option value="">Seçiniz...</option>
                            <option value="frontend">Frontend</option>
                            <option value="backend">Backend</option>
                            <option value="database">Database</option>
                            <option value="ux/ui">UX/UI</option>
                            <option value="is analizi">İş Analizi</option>
                            <option value="test">Test</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group half">
                        <label for="taskDueDate">Bitiş Tarihi</label>
                        <input type="date" id="taskDueDate" required>
                    </div>
                    <div class="form-group half">
                        <label for="taskPriority">Öncelik</label>
                        <select id="taskPriority" required>
                            <option value="">Seçiniz...</option>
                            <option value="high">Yüksek</option>
                            <option value="medium">Orta</option>
                            <option value="low">Düşük</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="taskDescription">Açıklama</label>
                    <textarea id="taskDescription" rows="4" placeholder="Görev açıklaması"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeTaskForm()">İptal</button>
                    <button type="submit" class="btn-primary">Görev Ekle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Project Edit Modal -->
    <div id="projectEditModal" class="modal" style="display: none; align-items: center; justify-content: center;">
        <div class="modal-content" style="position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%);">
            <div class="modal-header">
                <h2>Projeyi Düzenle</h2>
                <span class="close" id="closeProjectEditModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="projectEditForm">
                    <div class="form-group">
                        <label for="projectName">Proje Adı</label>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="text" id="projectName" class="form-control" style="width: 70%;" required>
                            <button type="button" id="favoriteProjectBtn" class="btn" style="display: flex; align-items: center; gap: 5px;">
                                <i class="fas fa-star" style="color: gold;"></i>
                                <span>Favorilere Ekle</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="projectDescription">Açıklama</label>
                        <textarea id="projectDescription" class="form-control" rows="6" placeholder="Proje hakkında kısa bir açıklama yazın..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Üyeler</label>
                        <div class="email-item">
                            <input type="email" id="memberEmail" class="form-control" placeholder="Üye e-posta adresi girin">
                            <button type="button" id="addMemberBtn" class="btn btn-primary"><i class="fas fa-plus"></i> Ekle</button>
                        </div>
                        <div id="projectMembers" class="added-emails">
                            <!-- Mevcut üyeler burada listelenecek -->
                        </div>
                    </div>
                    
                    <div class="form-actions" style="margin-top: 20px;">
                        <button type="button" id="cancelProjectEdit" class="btn btn-secondary">İptal</button>
                        <button type="submit" class="btn btn-primary">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Sidebar Modal -->
    <div id="sidebarModal" class="modal sidebar-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Sizin için</h2>
                <span class="close" id="closeSidebarModal">&times;</span>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- En Son için içerik -->
                <div id="enSonContent" class="modal-content-section">
                    <div class="search-container">
                        <input type="text" placeholder="Son öğeleri arayın" class="search-input">
                    </div>
                    <div class="recent-items">
                        <div class="recent-item">
                            <input type="checkbox" class="recent-checkbox">
                            <div class="recent-item-info">
                                <div class="recent-item-title">Api geliştirme</div>
                                <div class="recent-item-code">11 gün önce</div>
                            </div>
                        </div>
                        <div class="recent-item">
                            <input type="checkbox" class="recent-checkbox">
                            <div class="recent-item-info">
                                <div class="recent-item-title">UA-UX Tasarım</div>
                                <div class="recent-item-code">11 gün önce</div>
                            </div>
                        </div>
                        <div class="recent-item">
                            <input type="checkbox" class="recent-checkbox">
                            <div class="recent-item-info">
                                <div class="recent-item-title">Login Page kodlama</div>
                                <div class="recent-item-code">15 gün önce</div>
                            </div>
                        </div>
                        <div class="recent-item">
                            <input type="checkbox" class="recent-checkbox">
                            <div class="recent-item-info">
                                <div class="recent-item-title">uyjfymyfmkyfk</div>
                                <div class="recent-item-code">21 gün önce</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-link">En son görülenlerin tümünü göster</button>
                    </div>
                </div>
                
                <!-- Favori için içerik -->
                <div id="favoriContent" class="modal-content-section" style="display: none;">
                    <div class="search-container">
                        <input type="text" placeholder="Favori olarak işaretlenen öğeleri arayın" class="search-input">
                        <button class="filter-button">
                            <i class="fas fa-filter"></i>
                        </button>
                    </div>
                    <div class="project-items">
                        <div class="project-item-row">
                            <div class="project-item-icon">
                                <img src="images/collabio-logo.png" alt="Collabio" class="project-icon">
                            </div>
                            <div class="project-item-info">
                                <div class="project-item-title">Collabio</div>
                            </div>
                            <div class="project-item-star">
                                <i class="fas fa-star starred"></i>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-link">Tüm favori öğeleri görüntüleyin</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="project-member.js"></script>
    <script>
        // Proje düzenleme modalı
        document.addEventListener('DOMContentLoaded', function() {
            const projectEditModal = document.getElementById('projectEditModal');
            const closeProjectEditModal = document.getElementById('closeProjectEditModal');
            const cancelProjectEdit = document.getElementById('cancelProjectEdit');
            const projectEditForm = document.getElementById('projectEditForm');
            const addMemberBtn = document.getElementById('addMemberBtn');
            const memberEmailInput = document.getElementById('memberEmail');
            const projectMembersContainer = document.getElementById('projectMembers');
            const projectNameInput = document.getElementById('projectName');
            const projectDescriptionInput = document.getElementById('projectDescription');
            const favoriteProjectBtn = document.getElementById('favoriteProjectBtn');
            
            // Mevcut proje bilgileri (örnek veri)
            let currentProject = {
                id: 'collabio',
                name: 'Collabio',
                description: 'Proje yönetim uygulaması',
                members: [],
                isFavorite: false
            };
            
            // Proje düzenleme butonlarına tıklama olayı ekle
            document.querySelectorAll('.left-member-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    openProjectEditModal();
                });
            });
            
            // Modalı aç
            function openProjectEditModal() {
                // Mevcut proje bilgilerini doldur
                projectNameInput.value = currentProject.name;
                projectDescriptionInput.value = currentProject.description || '';
                
                // Favori durumunu güncelle
                updateFavoriteButton();
                
                // Mevcut üyeleri yükle
                loadProjectMembers();
                
                // Modalı göster
                projectEditModal.style.display = 'flex';
                document.body.classList.add('modal-open');
            }
            
            // Favori butonunu güncelle
            function updateFavoriteButton() {
                if (currentProject.isFavorite) {
                    favoriteProjectBtn.innerHTML = '<i class="fas fa-star" style="color: gold;"></i> <span>Favorilerden Çıkar</span>';
                    favoriteProjectBtn.classList.add('active');
                } else {
                    favoriteProjectBtn.innerHTML = '<i class="fas fa-star" style="color: gold;"></i> <span>Favorilere Ekle</span>';
                    favoriteProjectBtn.classList.remove('active');
                }
            }
            
            // Modalı kapat
            function closeProjectModal() {
                projectEditModal.style.display = 'none';
                document.body.classList.remove('modal-open');
            }
            
            // Kapatma butonlarına tıklama olayı ekle
            closeProjectEditModal.addEventListener('click', closeProjectModal);
            cancelProjectEdit.addEventListener('click', closeProjectModal);
            
            // Dışarı tıklayınca kapat
            window.addEventListener('click', function(e) {
                if (e.target === projectEditModal) {
                    closeProjectModal();
                }
            });
            
            // ESC tuşu ile kapat
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeProjectModal();
                }
            });
            
            // Üye ekleme işlevi
            function addMember(email) {
                if (email && !currentProject.members.includes(email)) {
                    currentProject.members.push(email);
                    loadProjectMembers();
                    memberEmailInput.value = '';
                } else if (currentProject.members.includes(email)) {
                    alert('Bu e-posta adresi zaten ekli.');
                }
            }
            
            // Üyeleri yükle
            function loadProjectMembers() {
                projectMembersContainer.innerHTML = '';
                
                currentProject.members.forEach(email => {
                    const memberTag = document.createElement('div');
                    memberTag.className = 'email-tag';
                    memberTag.innerHTML = `
                        ${email}
                        <button type="button" class="remove-email" data-email="${email}">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    
                    // Üyeyi kaldır butonuna tıklama olayı ekle
                    const removeBtn = memberTag.querySelector('.remove-email');
                    removeBtn.addEventListener('click', function() {
                        const emailToRemove = this.getAttribute('data-email');
                        currentProject.members = currentProject.members.filter(e => e !== emailToRemove);
                        loadProjectMembers();
                    });
                    
                    projectMembersContainer.appendChild(memberTag);
                });
            }
            
            // Favori butonuna tıklama olayı ekle
            favoriteProjectBtn.addEventListener('click', function() {
                // Favori durumunu tersine çevir
                currentProject.isFavorite = !currentProject.isFavorite;
                
                // Butonu güncelle
                updateFavoriteButton();
                
                // Burada API çağrısı yapılabilir
                console.log('Favori durumu güncellendi:', currentProject.isFavorite);
            });
            
            // Form gönderimi
            projectEditForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Proje bilgilerini güncelle
                currentProject.name = projectNameInput.value.trim();
                currentProject.description = projectDescriptionInput.value.trim();
                
                // Burada API çağrısı yapılabilir
                console.log('Güncellenen proje:', currentProject);
                
                // Proje adını sayfada güncelle
                const projectTitle = document.querySelector('.project-item.active .project-item-content span');
                if (projectTitle) {
                    projectTitle.textContent = currentProject.name;
                }
                
                // Modalı kapat
                closeProjectModal();
                
                // Başarı mesajı göster
                alert('Proje başarıyla güncellendi!');
            });
            
            // Üye ekle butonuna tıklama olayı ekle
            addMemberBtn.addEventListener('click', function() {
                const email = memberEmailInput.value.trim();
                if (email) {
                    addMember(email);
                }
            });
            
            // Enter tuşu ile üye ekle
            memberEmailInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const email = this.value.trim();
                    if (email) {
                        addMember(email);
                    }
                }
            });
            
            // Sayfa yüklendiğinde mevcut üyeleri yükle
            loadProjectMembers();
        });
    </script>
    <script src="board.js"></script>
</body>

</html>