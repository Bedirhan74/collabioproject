<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collabio - Liste Görünümü</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="comment-styles.css">
    <link rel="stylesheet" href="project-member.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo-container">
            <img src="images/collabio-logo.png" alt="Collabio Logo" class="logo">
        </div>

        <div class="nav-section">
            <a href="sizin_icin.html" class="nav-item"><i class="fas fa-user"></i> Sizin için</a>
            <a href="#" class="nav-item"><i class="fas fa-clock"></i> En son</a>
            <a href="#" class="nav-item"><i class="fas fa-star"></i> Favori</a>
        </div>
        
        <div class="nav-section">
            <div class="section-header">
                <span>Projeler</span>
                <button class="add-btn"><i class="fas fa-plus"></i></button>
            </div>
            <div class="project-item active">
                <div class="project-item-content">
                    <button class="project-member-btn left-member-btn" data-project-id="collabio" title="Katılımcı Ekle"><i class="fas fa-user-plus"></i></button>
                    <img src="images/collabio-logo.png" alt="Collabio" class="project-icon">
                    <span>Collabio</span>
                </div>
                <button class="project-member-btn" data-project-id="collabio" title="Katılımcı Ekle"><i class="fas fa-user-plus"></i></button>
            </div>
        </div>

    </nav>


    <main class="main-content">
        <header>
            <div class="header-top">
                <h1>Collabio Project Management</h1>
            </div>
            <nav class="project-nav">
                <div class="nav-left">
                    <a href="ozet.html" class="nav-link"><i class="fas fa-chart-pie"></i> Özet</a>
                    <a href="index.html" class="nav-link"><i class="fas fa-th-large"></i> Pano</a>
                    <a href="list.html" class="nav-link active"><i class="fas fa-list"></i> Liste</a>
                    <a href="calendar.html" class="nav-link"><i class="fas fa-calendar"></i> Takvim</a>
                    <a href="zamancizelgesi.html" class="nav-link"><i class="fas fa-chart-bar"></i> Zaman çizelgesi</a>
                    <a href="onaylar.html" class="nav-link"><i class="fas fa-check-circle"></i> Onaylar</a>
                    <a href="formlar.html" class="nav-link"><i class="fas fa-file-alt"></i> Formlar</a>
                    <a href="ekler.html" class="nav-link"><i class="fas fa-paperclip"></i> Ekler</a>
                </div>

            </nav>
        </header>

        <div class="list-container dashboard-list-bg" style="overflow-x:auto;">
            <table class="dashboard-table">
                <thead>
                    <tr>
                        <th></th>
                        <th>Tür</th>
                        <th>Anahtar</th>
                        <th>Özet</th>
                        <th>Durum</th>
                        <th>Yorumlar</th>
                        <th>Kategori</th>
                        <th>Atanan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td><i class="fas fa-server"></i></td>
                        <td>COL-3</td>
                        <td>Api geliştirme</td>
                        <td><span class="status-badge devam-ediyor">DEVAM EDİYOR</span></td>
                        <td><button class="comment-btn" data-task-code="COL-3"><i class="fas fa-comment"></i> 1 yorum</button></td>
                        <td><span class="category-badge backend">backend</span></td>
                        <td>
                            <img src="https://ui-avatars.com/api/?name=ÖF&background=18a0fb&color=fff" class="avatar dashboard-avatar" title="Ömer Faruk">
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td><i class="fas fa-laptop-code"></i></td>
                        <td>COL-5</td>
                        <td>Login Page kodlama</td>
                        <td><span class="status-badge devam-ediyor">DEVAM EDİYOR</span></td>
                        <td><i class="fas fa-comment"></i> Yorum ekleyin</td>
                        <td><span class="category-badge frontend">frontend</span></td>
                        <td>
                            <img src="https://ui-avatars.com/api/?name=CY&background=9c27b0&color=fff" class="avatar dashboard-avatar" title="Ceren Yolur">
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td><i class="fas fa-database"></i></td>
                        <td>COL-6</td>
                        <td>Veri Tabanı Tasarımı</td>
                        <td><span class="status-badge devam-ediyor">DEVAM EDİYOR</span></td>
                        <td><i class="fas fa-comment"></i> Yorum ekleyin</td>
                        <td><span class="category-badge database">database</span></td>
                        <td>
                            <img src="https://ui-avatars.com/api/?name=EK&background=00bfae&color=fff" class="avatar dashboard-avatar" title="Emre Kandazoğlu">
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td><i class="fas fa-database"></i></td>
                        <td>COL-11</td>
                        <td>Veri Tabanı Tasarımı</td>
                        <td><span class="status-badge devam-ediyor">DEVAM EDİYOR</span></td>
                        <td><i class="fas fa-comment"></i> Yorum ekleyin</td>
                        <td><span class="category-badge database">database</span></td>
                        <td>
                            <img src="https://ui-avatars.com/api/?name=BÖ&background=ff7043&color=fff" class="avatar dashboard-avatar" title="Büşra Özer">
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td><i class="fas fa-palette"></i></td>
                        <td>COL-4</td>
                        <td>UX/UI Tasarımı</td>
                        <td><span class="status-badge tamam">TAMAMLANDI</span></td>
                        <td><i class="fas fa-comment"></i> Yorum ekleyin</td>
                        <td><span class="category-badge ux-ui">ux/ui</span></td>
                        <td>
                            <img src="https://ui-avatars.com/api/?name=BO&background=ffd600&color=333" class="avatar dashboard-avatar" title="Bedirhan Özmen">
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td><i class="fas fa-code"></i></td>
                        <td>COL-10</td>
                        <td>Frontend Geliştirme Arif</td>
                        <td><span class="status-badge tamam">TAMAMLANDI</span></td>
                        <td><i class="fas fa-comment"></i> Yorum ekleyin</td>
                        <td><span class="category-badge frontend">frontend</span></td>
                        <td>
                            <img src="https://ui-avatars.com/api/?name=AE&background=ff7043&color=fff" class="avatar dashboard-avatar" title="Arif Emink">
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td><i class="fas fa-tasks"></i></td>
                        <td>COL-12</td>
                        <td>İş akışları</td>
                        <td><span class="status-badge yapilacaklar">YAPILACAKLAR</span></td>
                        <td><i class="fas fa-comment"></i> Yorum ekleyin</td>
                        <td><span class="category-badge is-analizi">iş analizi</span></td>
                        <td>
                            <img src="https://ui-avatars.com/api/?name=BT&background=18a0fb&color=fff" class="avatar dashboard-avatar" title="Bahri Talha Baş">
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td><i class="fas fa-cogs"></i></td>
                        <td>COL-9</td>
                        <td>Otomasyon projesinin temel yapısını oluşturmak.</td>
                        <td><span class="status-badge yapilacaklar">YAPILACAKLAR</span></td>
                        <td><i class="fas fa-comment"></i> Yorum ekleyin</td>
                        <td><span class="category-badge test">test</span></td>
                        <td>
                            <img src="https://ui-avatars.com/api/?name=MD&background=9c27b0&color=fff" class="avatar dashboard-avatar" title="Melike Danışmaz">
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>
    <!-- Sidebar Modal -->
    <div id="sidebarModal" class="modal sidebar-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Sizin için</h2>
                <span class="close" id="closeSidebarModal">&times;</span>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- En Son için içerik -->
                <div id="enSonContent" class="modal-content-section">
                    <div class="search-container">
                        <input type="text" placeholder="Son öğeleri arayın" class="search-input">
                    </div>
                    <div class="recent-items">
                        <div class="recent-item">
                            <input type="checkbox" class="recent-checkbox">
                            <div class="recent-item-info">
                                <div class="recent-item-title">Api geliştirme</div>
                                <div class="recent-item-code">11 gün önce</div>
                            </div>
                        </div>
                        <div class="recent-item">
                            <input type="checkbox" class="recent-checkbox">
                            <div class="recent-item-info">
                                <div class="recent-item-title">UA-UX Tasarım</div>
                                <div class="recent-item-code">11 gün önce</div>
                            </div>
                        </div>
                        <div class="recent-item">
                            <input type="checkbox" class="recent-checkbox">
                            <div class="recent-item-info">
                                <div class="recent-item-title">Login Page kodlama</div>
                                <div class="recent-item-code">15 gün önce</div>
                            </div>
                        </div>
                        <div class="recent-item">
                            <input type="checkbox" class="recent-checkbox">
                            <div class="recent-item-info">
                                <div class="recent-item-title">uyjfymyfmkyfk</div>
                                <div class="recent-item-code">21 gün önce</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-link">En son görülenlerin tümünü göster</button>
                    </div>
                </div>
                
                <!-- Favori için içerik -->
                <div id="favoriContent" class="modal-content-section" style="display: none;">
                    <div class="search-container">
                        <input type="text" placeholder="Favori olarak işaretlenen öğeleri arayın" class="search-input">
                        <button class="filter-button">
                            <i class="fas fa-filter"></i>
                        </button>
                    </div>
                    <div class="project-items">
                        <div class="project-item-row">
                            <div class="project-item-icon">
                                <img src="images/collabio-logo.png" alt="Collabio" class="project-icon">
                            </div>
                            <div class="project-item-info">
                                <div class="project-item-title">Collabio</div>
                            </div>
                            <div class="project-item-star">
                                <i class="fas fa-star starred"></i>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-link">Tüm favori öğeleri görüntüleyin</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>

    <!-- Yorum Modalı -->
    <div id="commentModal" class="modal">
        <div class="modal-content comment-modal-content">
            <div class="modal-header">
                <h2>Yorumlar - <span id="commentTaskCode">COL-3</span></h2>
                <span class="close" id="closeCommentModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="comments-container" id="commentsContainer">
                    <!-- Mevcut yorumlar burada gösterilecek -->
                </div>
                <div class="comment-form-container">
                    <form id="commentForm">
                        <div class="form-group">
                            <textarea id="commentText" placeholder="Yorum ekleyin..." required></textarea>
                        </div>
                        <div class="form-group file-upload-group">
                            <label for="commentFile" class="file-upload-label">
                                <i class="fas fa-paperclip"></i> Dosya Ekle
                            </label>
                            <input type="file" id="commentFile" class="file-upload-input">
                            <span id="selectedFileName"></span>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Yorum Ekle</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="comments.js"></script>
    
    <!-- Proje Düzenleme ve Katılımcı Ekleme Modalı -->
    <div id="projectModal" class="project-modal">
        <div class="project-modal-content">
            <div class="project-modal-header">
                <h2>Proje Yönetimi - <span id="projectName">Collabio</span></h2>
                <span class="close" id="closeProjectModal">&times;</span>
            </div>
            <div class="project-tabs">
                <div class="project-tab active" data-tab="details">Proje Detayları</div>
                <div class="project-tab" data-tab="members">Katılımcılar</div>
            </div>
            <div class="project-modal-body">
                <!-- Proje Detayları Tabı -->
                <div class="project-tab-content active" id="detailsTab">
                    <form id="projectDetailsForm">
                        <div class="project-form-group">
                            <label for="projectNameInput">Proje Adı</label>
                            <input type="text" id="projectNameInput" value="Collabio" required>
                        </div>
                        <div class="project-form-group">
                            <label for="projectDescription">Proje Açıklaması</label>
                            <textarea id="projectDescription" placeholder="Proje hakkında açıklama ekleyin...">Jira benzeri proje yönetim uygulaması</textarea>
                        </div>
                    </form>
                </div>
                
                <!-- Katılımcılar Tabı -->
                <div class="project-tab-content" id="membersTab">
                    <div class="member-list">
                        <div class="member-item">
                            <div class="member-avatar" style="background-color: #9c27b0;">MD</div>
                            <div class="member-info">
                                <div class="member-name">Melike Danışmaz</div>
                                <div class="member-role">Proje Yöneticisi</div>
                            </div>
                            <div class="member-actions">
                                <button class="member-action-btn"><i class="fas fa-pencil-alt"></i></button>
                                <button class="member-action-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="member-item">
                            <div class="member-avatar" style="background-color: #18a0fb;">ÖF</div>
                            <div class="member-info">
                                <div class="member-name">Ömer Faruk Bingöl</div>
                                <div class="member-role">Geliştirici</div>
                            </div>
                            <div class="member-actions">
                                <button class="member-action-btn"><i class="fas fa-pencil-alt"></i></button>
                                <button class="member-action-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="member-item">
                            <div class="member-avatar" style="background-color: #ffd600;">BO</div>
                            <div class="member-info">
                                <div class="member-name">Bedirhan Özmen</div>
                                <div class="member-role">Tasarımcı</div>
                            </div>
                            <div class="member-actions">
                                <button class="member-action-btn"><i class="fas fa-pencil-alt"></i></button>
                                <button class="member-action-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="add-member-form">
                        <h3>Yeni Katılımcı Ekle</h3>
                        <form id="addMemberForm">
                            <div class="project-form-group">
                                <label for="memberName">Ad Soyad</label>
                                <input type="text" id="memberName" placeholder="Katılımcı adı ve soyadı" required>
                            </div>
                            <div class="project-form-group">
                                <label for="memberRole">Rol</label>
                                <input type="text" id="memberRole" placeholder="Örn: Geliştirici, Tasarımcı, Test Uzmanı" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Katılımcı Ekle</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="project-modal-footer">
                <button class="btn btn-secondary" id="cancelProjectBtn">İptal</button>
                <button class="btn btn-primary" id="saveProjectBtn">Kaydet</button>
            </div>
        </div>
    </div>
    
    <!-- Member Addition Modal -->
    <div id="memberAdditionModal" class="member-addition-modal">
        <div class="member-addition-content">
            <div class="member-addition-header">
                <h3>Katılımcı Ekle</h3>
            </div>
            <div class="member-addition-body">
                <p>Projeye katılımcı eklemek için e-posta adreslerini girin.</p>
                <div id="emailList">
                    <div class="email-item">
                        <input type="email" class="form-control participant-email" placeholder="E-posta adresi girin">
                        <button type="button" class="btn-add-email"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
                <div id="addedEmails" class="added-emails">
                    <!-- Added emails will appear here -->
                </div>
            </div>
            <div class="member-addition-footer">
                <button type="button" class="btn btn-secondary" id="cancelMemberAddition">İptal</button>
                <button type="button" class="btn btn-primary" id="saveMembers">Kaydet</button>
            </div>
        </div>
    </div>

    <script src="project-member.js"></script>
    <script>
        // Member addition functionality
        document.addEventListener('DOMContentLoaded', function() {
            const memberAdditionModal = document.getElementById('memberAdditionModal');
            const memberAdditionBtns = document.querySelectorAll('.project-member-btn');
            const cancelMemberAdditionBtn = document.getElementById('cancelMemberAddition');
            const saveMembersBtn = document.getElementById('saveMembers');
            const emailListContainer = document.getElementById('emailList');
            const addedEmailsContainer = document.getElementById('addedEmails');
            const addedEmails = [];

            // Open modal when any member addition button is clicked
            memberAdditionBtns.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    memberAdditionModal.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                });
            });

            // Close modal when clicking cancel or outside the modal
            cancelMemberAdditionBtn.addEventListener('click', closeMemberAdditionModal);
            window.addEventListener('click', function(e) {
                if (e.target === memberAdditionModal) {
                    closeMemberAdditionModal();
                }
            });

            // Close modal with ESC key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeMemberAdditionModal();
                }
            });

            // Save members
            saveMembersBtn.addEventListener('click', function() {
                // Here you would typically save the members to your backend
                alert('Katılımcılar başarıyla eklendi!');
                closeMemberAdditionModal();
            });

            // Email addition functionality
            function setupEmailAddButton(button) {
                button.addEventListener('click', function() {
                    const emailInput = this.previousElementSibling;
                    addEmail(emailInput);
                });

                // Also add email when pressing Enter
                const emailInput = button.previousElementSibling;
                emailInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        addEmail(this);
                    }
                });
            }


            function addEmail(input) {
                const email = input.value.trim();
                
                if (email && isValidEmail(email) && !addedEmails.includes(email)) {
                    // Add email to the list
                    addedEmails.push(email);
                    
                    // Create email tag
                    const emailTag = document.createElement('div');
                    emailTag.className = 'email-tag';
                    emailTag.innerHTML = `
                        ${email}
                        <button type="button" class="remove-email" data-email="${email}">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    
                    // Add remove functionality
                    emailTag.querySelector('.remove-email').addEventListener('click', function() {
                        const emailToRemove = this.getAttribute('data-email');
                        const index = addedEmails.indexOf(emailToRemove);
                        
                        if (index !== -1) {
                            addedEmails.splice(index, 1);
                            this.parentElement.remove();
                        }
                    });
                    
                    // Add tag to container
                    addedEmailsContainer.appendChild(emailTag);
                    
                    // Clear input
                    input.value = '';
                    input.focus();
                    
                } else if (!isValidEmail(email) && email) {
                    alert('Lütfen geçerli bir e-posta adresi girin.');
                } else if (addedEmails.includes(email)) {
                    alert('Bu e-posta adresi zaten eklenmiş.');
                    input.value = '';
                }
            }

            
            function isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
            
            function closeMemberAdditionModal() {
                memberAdditionModal.style.display = 'none';
                document.body.style.overflow = 'auto';
                
                // Clear the form when closing
                document.querySelector('.participant-email').value = '';
                addedEmails.length = 0;
                addedEmailsContainer.innerHTML = '';
            }
            
            // Initialize email add button
            const addEmailBtn = document.querySelector('.btn-add-email');
            if (addEmailBtn) {
                setupEmailAddButton(addEmailBtn);
            }
        });
    </script>
</body>

</html>